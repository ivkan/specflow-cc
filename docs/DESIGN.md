# SpecFlow — Spec-Driven Development для Claude Code

**Название проекта:** SpecFlow
**Дата:** 2026-01-20
**Статус:** Финальный дизайн-документ

---

## 1. Сравнительный анализ подходов

### 1.1 Ваш текущий процесс (spec-driven workflow)

**Философия:** Спецификации как контракты между сессиями. Кросс-аудит для качества.

**Сильные стороны:**

| Аспект | Описание |
|--------|----------|
| **Фокус на качестве** | Явный цикл аудита спецификации → реализации |
| **Компактные спецификации** | Чёткий формат: Контекст → Задача → Требования → Критерии приёмки |
| **Кросс-аудит** | Отдельные "чистые" сессии для review (нет bias) |
| **Человек-в-петле** | Вы контролируете, когда переходить между этапами |
| **Минимальный overhead** | Нет сложной инфраструктуры, только файлы и дисциплина |

**Слабые стороны:**

| Аспект | Описание |
|--------|----------|
| **Ручной контекст** | Копирование между сессиями вручную |
| **Нет состояния** | Отсутствует единый STATE.md с решениями |
| **Нет параллелизации** | Последовательное выполнение |
| **Нет интеграции с Claude Code** | Отдельные сессии без CLI-automation |

---

### 1.2 GSD (Get Shit Done)

**Философия:** Meta-prompting + Context Engineering. Subagent orchestration для свежего контекста.

**Сильные стороны:**

| Аспект | Описание |
|--------|----------|
| **Нативная интеграция** | Slash-команды, hooks, statusline |
| **Context preservation** | STATE.md, subagent isolation |
| **Параллелизация** | Wave-based execution |
| **Atomic commits** | Один коммит = одна задача |
| **Goal-backward verification** | must_haves в планах |
| **Session persistence** | pause-work / resume-work |

**Слабые стороны:**

| Аспект | Проблема |
|--------|----------|
| **Overhead** | 25 команд, 11 агентов, 40+ шаблонов — complexity tax |
| **Длинное планирование** | discuss → research → plan → check → execute |
| **Инфляция токенов** | Много "служебных" сообщений между агентами |
| **Нет явного аудита качества** | Verification ≠ Audit. Проверяет "есть ли код", не "хорош ли код" |
| **Неполнота реализации** | Пример: рефакторинг +20% кода вместо замены |
| **Слепая вера в планы** | Если план неполный, executor не поймёт |

---

### 1.3 Ключевое различие

| Ваш подход | GSD |
|------------|-----|
| **Audit-driven** — отдельные сессии проверяют качество | **Verification-driven** — автоматизированные проверки "есть/нет" |
| **Human gate** — вы решаете, когда переходить | **Checkpoint gate** — система решает, когда спросить |
| **Простота** — файлы + дисциплина | **Complexity** — 25 команд, 11 агентов |

---

## 2. Корневые причины проблем GSD

### 2.1 Почему рефакторинг дал +20% кода

**Диагноз:** GSD проверяет "артефакты существуют", но не "старый код удалён".

```yaml
# Типичный must_haves в GSD
must_haves:
  artifacts:
    - path: "src/refactored/NewClass.ts"
      provides: "Refactored implementation"
  truths:
    - "NewClass works correctly"
```

**Что пропущено:**
- "OldClass.ts deleted or deprecated"
- "No imports reference OldClass"
- "Total LOC decreased by X%"

**Решение:** Добавить **deletion verification** и **LOC delta checks**.

---

### 2.2 Почему долгое планирование ≠ качество

**Диагноз:** GSD оптимизирует под "completeness of plan", не под "minimal viable plan".

```
discuss-phase (задаёт 10+ вопросов)
    ↓
research-phase (исследует всё)
    ↓
plan-phase (создаёт 3-5 планов)
    ↓
plan-checker (валидирует)
    ↓
execute...
```

**Проблема:** Каждый шаг тратит токены, но качество плана не пропорционально затратам.

**Ваш процесс:**
```
1 спецификация → 1 аудит → исправления → 1 реализация
```

**Решение:** **Lean planning** — меньше этапов, больше качества на каждом.

---

### 2.3 Отсутствие качественного аудита

**GSD Verification:**
```yaml
truths:
  - "User can login"  # Проверяет "работает"
```

**Ваш Audit:**
```markdown
Проверить:
- Качество кода и архитектурная чистота
- Соответствие спецификации
- Интеграция с существующим кодом
- Лучшие практики
- Нет дублирования
- Минимизация когнитивной нагрузки
```

**Решение:** Интегрировать **качественный аудит** как отдельный этап.

---

## 3. Архитектура SpecFlow

### 3.1 Философия: "Spec-Driven + Claude Code Native"

```
┌─────────────────────────────────────────────────────────────┐
│                    SPECFLOW WORKFLOW                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  /sf init              → Инициализация проекта              │
│       ↓                                                     │
│  /sf new               → Создать спецификацию               │
│       ↓                                                     │
│  /sf audit             → Аудит спецификации (fresh context) │
│       ↓                                                     │
│  /sf run               → Реализация по спецификации         │
│       ↓                                                     │
│  /sf review            → Аудит реализации (fresh context)   │
│       ↓                                                     │
│  /sf done              → Финализация + коммит               │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 Ключевые принципы

| # | Принцип | Реализация |
|---|---------|------------|
| 1 | **Spec-first** | Спецификация создаётся до реализации |
| 2 | **Explicit audit** | Аудит — отдельный этап, не verification |
| 3 | **Fresh context** | Аудитор не видит процесс создания |
| 4 | **Lean process** | Минимум команд, максимум пользы |
| 5 | **Human gate** | Человек решает, когда переходить |
| 6 | **State persistence** | STATE.md для решений между сессиями |
| 7 | **Token awareness** | Спецификации ≤ одной сессии (~150k токенов) |

---

### 3.3 Система команд

#### Принципы именования

- **Короткие** — 2-6 символов основная команда
- **Глаголы действия** — что делает, а не что это
- **Без избыточности** — `/sf` вместо `/specflow`, `new` вместо `create-spec`
- **Единообразие** — похожие действия = похожие имена

#### Основные команды (Core)

| Команда | Описание | Когда использовать |
|---------|----------|-------------------|
| `/sf init` | Инициализация проекта + анализ кодовой базы | Один раз в начале проекта |
| `/sf new` | Создать новую спецификацию | Начало новой задачи |
| `/sf audit` | Аудит спецификации | После создания/доработки спецификации |
| `/sf revise` | Доработать спецификацию по замечаниям | После аудита с замечаниями |
| `/sf run` | Выполнить спецификацию | После одобрения аудита |
| `/sf review` | Аудит реализации | После выполнения |
| `/sf fix` | Исправить реализацию по замечаниям | После review с замечаниями |
| `/sf done` | Завершить и закоммитить | После одобрения review |

#### Навигация и состояние

| Команда | Описание |
|---------|----------|
| `/sf status` | Текущее состояние, следующий шаг |
| `/sf list` | Список всех спецификаций |
| `/sf show [ID]` | Показать спецификацию |
| `/sf next` | Следующая по приоритету задача |

#### Управление задачами

| Команда | Описание |
|---------|----------|
| `/sf todo [текст]` | Добавить идею/задачу на будущее |
| `/sf todos` | Список todos с приоритетами |
| `/sf plan [ID]` | Превратить todo в спецификацию |
| `/sf priority` | Интерактивная приоритизация |

#### Декомпозиция

| Команда | Описание |
|---------|----------|
| `/sf split [ID]` | Разбить большую спецификацию на части |
| `/sf deps` | Показать граф зависимостей |

#### Сессии

| Команда | Описание |
|---------|----------|
| `/sf pause` | Сохранить контекст для паузы |
| `/sf resume` | Восстановить контекст |

#### Утилиты

| Команда | Описание |
|---------|----------|
| `/sf help` | Справка по командам |
| `/sf history` | История выполненных спецификаций |
| `/sf metrics` | Статистика (время, ревизии, etc.) |

---

### 3.4 Полный Workflow

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         SPECFLOW COMPLETE WORKFLOW                       │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │ INITIALIZATION (один раз)                                        │    │
│  │                                                                  │    │
│  │  /sf init  ──→  Анализ кодовой базы                             │    │
│  │                 Создание .specflow/PROJECT.md                    │    │
│  │                 Создание .specflow/STATE.md                      │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│       ↓                                                                  │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │ SPEC CREATION                                                    │    │
│  │                                                                  │    │
│  │  /sf new "описание задачи"                                      │    │
│  │       ↓                                                          │    │
│  │  Агент задаёт критические вопросы (если нужно)                  │    │
│  │       ↓                                                          │    │
│  │  Создаёт SPEC-XXX.md с оценкой сложности                        │    │
│  │       ↓                                                          │    │
│  │  [Large?] ──yes──→ /sf split (декомпозиция)                     │    │
│  │       │                                                          │    │
│  │       no                                                         │    │
│  └───────┼─────────────────────────────────────────────────────────┘    │
│          ↓                                                               │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │ SPEC AUDIT LOOP                                                  │    │
│  │                                                                  │    │
│  │  /sf audit ──→ APPROVED? ──yes──→ EXIT LOOP                     │    │
│  │       │                                                          │    │
│  │       no (замечания)                                             │    │
│  │       ↓                                                          │    │
│  │  /sf revise [инструкции]                                        │    │
│  │       │                                                          │    │
│  │       └──────────→ loop back                                     │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│          ↓                                                               │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │ EXECUTION                                                        │    │
│  │                                                                  │    │
│  │  /sf run ──→ Реализация с atomic commits                        │    │
│  │                                                                  │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│          ↓                                                               │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │ IMPL REVIEW LOOP                                                 │    │
│  │                                                                  │    │
│  │  /sf review ──→ APPROVED? ──yes──→ EXIT LOOP                    │    │
│  │       │                                                          │    │
│  │       no (замечания)                                             │    │
│  │       ↓                                                          │    │
│  │  /sf fix [инструкции]                                           │    │
│  │       │                                                          │    │
│  │       └──────────→ loop back                                     │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│          ↓                                                               │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │ COMPLETION                                                       │    │
│  │                                                                  │    │
│  │  /sf done ──→ Финальный коммит                                  │    │
│  │              Обновление STATE.md                                 │    │
│  │              Архивация спецификации                              │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

### 3.5 Циклы аудита

#### Аудит спецификации

```
/sf audit

┌─────────────────────────────────────────────────────────┐
│ Аудит SPEC-001 v2                                        │
│                                                          │
│ Статус: NEEDS_REVISION                                   │
│                                                          │
│ Критические:                                             │
│ 1. Не указано удаление OldClass.ts                       │
│ 2. Критерий "работает корректно" не измерим              │
│                                                          │
│ Рекомендации:                                            │
│ 3. Добавить пример ожидаемого API response               │
│                                                          │
│ Следующий шаг: /sf revise                                │
└─────────────────────────────────────────────────────────┘
```

#### Аудит без замечаний

```
/sf audit

✅ SPEC-001 прошла аудит

Статус: APPROVED
Комментарий: Требования полны, критерии измеримы.

Следующий шаг: /sf run
```

#### Аудит реализации

```
/sf review

┌─────────────────────────────────────────────────────────┐
│ Review SPEC-001                                          │
│                                                          │
│ Статус: NEEDS_FIXES                                      │
│                                                          │
│ Проблемы:                                                │
│ 1. OldClass.ts не удалён (осталось 2 импорта)           │
│ 2. Отсутствует обработка ошибок в UserService.ts:45     │
│                                                          │
│ Рекомендации:                                            │
│ 3. Добавить JSDoc к публичным методам                   │
│                                                          │
│ Следующий шаг: /sf fix                                   │
└─────────────────────────────────────────────────────────┘
```

---

### 3.6 Команда `/sf revise`

**Без аргументов** — интерактивный режим:

```
/sf revise

Аудит v2 выявил:

Критические:
1. Не указано удаление OldClass.ts
2. Критерий "работает корректно" не измерим

Рекомендации:
3. Добавить пример ожидаемого API response

Что исправить?
- "all" — применить все замечания
- "1,2" — только критические
- "1,3" — выборочно
- или опишите свои изменения
```

**С аргументами:**

```bash
/sf revise all                    # Применить все замечания
/sf revise 1,2                    # Только пункты 1 и 2
/sf revise добавить удаление OldClass.ts, игнорировать п.3
```

---

### 3.7 Блокировка `/sf run`

**Предупреждение + подтверждение** (не жёсткая блокировка):

```
/sf run

⚠️  SPEC-001 не прошла аудит (status: revision_requested)

Последний аудит выявил 2 критических замечания:
1. Не указано удаление OldClass.ts
2. Критерий "работает корректно" не измерим

Продолжить? [y/N]
```

**При подтверждении** — записывается в STATE.md для трекинга.

---

### 3.8 Декомпозиция больших задач

#### Автоматическая оценка сложности

При создании спецификации агент оценивает:

| Размер | Токены | Действие |
|--------|--------|----------|
| **Small** | ≤50k | Выполняется напрямую |
| **Medium** | 50-150k | Предупреждение, выполняется |
| **Large** | >150k | Требует декомпозиции |

#### Команда `/sf split`

```
/sf split SPEC-001

Спецификация SPEC-001 слишком большая (~200k токенов).

Предлагаю разбить на:
1. SPEC-001a: Создание UserService (50k)
2. SPEC-001b: Миграция существующего кода (60k)
3. SPEC-001c: Удаление OldUserService (30k)

Зависимости: 001a → 001b → 001c

Создать? [Y/n]
```

---

### 3.9 Система To-Do

#### Создание

```bash
/sf todo Добавить кэширование для API

✅ TODO-005 создан
Приоритет: не установлен
```

#### Просмотр

```
/sf todos

┌─────────────────────────────────────────────────────────┐
│ To-Do List                                               │
├────┬─────────────────────────────────────┬──────────────┤
│ #  │ Описание                            │ Приоритет    │
├────┼─────────────────────────────────────┼──────────────┤
│ 1  │ Добавить кэширование для API        │ high         │
│ 2  │ Рефакторинг AuthService             │ medium       │
│ 3  │ Обновить документацию               │ low          │
│ 4  │ Исследовать WebSocket               │ —            │
└────┴─────────────────────────────────────┴──────────────┘

/sf plan 1    — превратить в спецификацию
/sf priority  — изменить приоритеты
```

#### Приоритизация

```
/sf priority

Текущий порядок:
1. [high] Добавить кэширование для API
2. [medium] Рефакторинг AuthService
3. [low] Обновить документацию
4. [—] Исследовать WebSocket

Изменить порядок? Введите новый порядок (например: 2,1,4,3)
или "tech" для технически оптимального порядка:
```

---

### 3.10 Уточняющие вопросы

Агент задаёт **только критические вопросы**, остальное — assumptions:

```
/sf new "Добавить авторизацию"

Для создания спецификации нужно уточнить:

1. Метод авторизации?
   a) JWT (рекомендую)
   b) Session-based
   c) OAuth 2.0

Остальное будет принято как assumptions (можно изменить при /sf revise):
- База данных: PostgreSQL (из PROJECT.md)
- Framework: Next.js (из PROJECT.md)
```

**Assumptions записываются в спецификацию:**

```markdown
## Assumptions (сделаны агентом)
- Используем PostgreSQL (из PROJECT.md)
- API будет REST (не указано явно)

> Если assumptions неверны, укажите при /sf revise
```

---

### 3.11 Гибридное хранение аудитов

#### Структура файлов

```
.specflow/
├── PROJECT.md           # Обзор проекта (из /sf init)
├── STATE.md             # Текущее состояние
├── config.json          # Настройки
├── specs/
│   ├── SPEC-001.md      # Спецификация + краткая история
│   ├── SPEC-002.md
│   └── ...
├── audits/
│   ├── SPEC-001-AUDIT-v1.md  # Детальный (при >3 замечаний)
│   └── ...
├── todos/
│   └── TODO.md          # Список идей
└── archive/
    └── SPEC-000.md      # Завершённые
```

#### Правило размещения аудитов

| Условие | Где хранится |
|---------|--------------|
| ≤3 замечания | Внутри спецификации |
| >3 замечаний | Отдельный файл + резюме в спецификации |

---

### 3.12 Формат спецификации

```markdown
---
id: SPEC-001
type: feature | refactor | bugfix
status: draft | audited | running | review | done
priority: high | medium | low
complexity: small | medium | large
created: 2026-01-20
---

# [Название задачи]

## Контекст
[Зачем это нужно]

## Задача
[Что нужно сделать]

## Требования
### Интерфейсы (если применимо)
### Файлы для создания/изменения
### Файлы для удаления (!)

## Критерии приёмки
- [ ] [Критерий 1]
- [ ] [Критерий 2]

## Ограничения
- [Что НЕ делать]

## Assumptions (заполняется агентом)
- [Assumption 1]
- [Assumption 2]

---

## История аудитов

### Аудит v1 (2026-01-20 14:30)
**Статус:** NEEDS_REVISION
**Замечания:**
1. ...

### Ответ v1 (2026-01-20 15:00)
**Изменения:**
1. ✅ ...

---
```

---

### 3.13 State Management

```markdown
# .specflow/STATE.md

## Текущая позиция
- **Активная спецификация:** SPEC-003
- **Статус:** running
- **Следующий шаг:** /sf review

## Очередь
| # | ID | Название | Приоритет | Статус |
|---|----|----------|-----------|--------|
| 1 | SPEC-003 | Auth middleware | high | running |
| 2 | SPEC-004 | User profile | medium | audited |
| 3 | SPEC-005 | Settings page | low | draft |

## Решения
| Дата | Спецификация | Решение |
|------|--------------|---------|
| 2026-01-15 | SPEC-001 | jose вместо jsonwebtoken |
| 2026-01-18 | SPEC-002 | PostgreSQL вместо MySQL |

## Паттерны проекта
- JWT auth через httpOnly cookies
- API routes в /app/api/
- Prisma для ORM

## Предупреждения
| Дата | Спецификация | Причина |
|------|--------------|---------|
| — | — | — |
```

---

### 3.14 Конфигурация

```json
// .specflow/config.json
{
  "auto_commit": true,
  "commit_format": "feat(sf-{id}): {description}",
  "ask_questions": "critical_only",
  "complexity_threshold": {
    "small": 50000,
    "medium": 150000
  },
  "audit_storage": "hybrid"
}
```

---

## 4. Сравнение с GSD

| Аспект | GSD | SpecFlow |
|--------|-----|----------|
| **Команд** | 25 | 15 |
| **Агентов** | 11 | 4 |
| **Этапов на задачу** | 5+ | 3-4 |
| **Аудит качества** | Нет | Да (явный) |
| **Цикл доработки** | Нет | Да (`/sf revise`, `/sf fix`) |
| **Удаление кода** | Не проверяется | Явный checklist |
| **Блокировка** | Жёсткая | Мягкая (предупреждение) |
| **Декомпозиция** | Ручная | Автоматическая оценка + `/sf split` |
| **To-Do система** | Есть | Есть + приоритизация |
| **Atomic commits** | Да | Да |

---

## 5. Ответы на вопросы

### 5.1 Fork GSD или новый проект?

**Решение: Новый проект**

**Причины:**
1. Другая философия — audit-driven vs verification-driven
2. Меньше команд — не нужно удалять 20 команд
3. Проще поддержка — нет зависимости от upstream
4. Чище архитектура

**Что взять из GSD:**
- Структура установки через npx
- Hooks система (statusline)
- Subagent pattern

---

### 5.2 Установка через npx

```json
// package.json
{
  "name": "specflow-cc",
  "bin": {
    "specflow-cc": "bin/install.js"
  },
  "files": ["bin", "commands", "agents", "templates"]
}
```

```bash
npx specflow-cc
```

---

### 5.3 Лицензия

MIT — полностью оригинальный код.

---

## 6. План реализации

### Фаза 1: Core (3-4 дня)

**Команды:**
- `/sf init`
- `/sf new`
- `/sf audit`
- `/sf revise`
- `/sf run`
- `/sf review`
- `/sf fix`
- `/sf done`
- `/sf status`

**Агенты:**
- spec-creator
- spec-auditor
- spec-executor
- impl-reviewer

---

### Фаза 2: Navigation & State (2 дня)

**Команды:**
- `/sf list`
- `/sf show`
- `/sf next`
- `/sf pause`
- `/sf resume`

---

### Фаза 3: To-Do & Decomposition (2 дня)

**Команды:**
- `/sf todo`
- `/sf todos`
- `/sf plan`
- `/sf priority`
- `/sf split`
- `/sf deps`

---

### Фаза 4: Polish (1-2 дня)

**Команды:**
- `/sf help`
- `/sf history`
- `/sf metrics`

**Также:**
- Statusline hook
- README.md
- Публикация npm

---

## 7. Структура репозитория

```
specflow-cc/
├── package.json
├── README.md
├── LICENSE (MIT)
├── CHANGELOG.md
├── bin/
│   └── install.js
├── commands/
│   └── sf/
│       ├── init.md
│       ├── new.md
│       ├── audit.md
│       ├── revise.md
│       ├── run.md
│       ├── review.md
│       ├── fix.md
│       ├── done.md
│       ├── status.md
│       ├── list.md
│       ├── show.md
│       ├── next.md
│       ├── todo.md
│       ├── todos.md
│       ├── plan.md
│       ├── priority.md
│       ├── split.md
│       ├── deps.md
│       ├── pause.md
│       ├── resume.md
│       ├── help.md
│       ├── history.md
│       └── metrics.md
├── agents/
│   ├── spec-creator.md
│   ├── spec-auditor.md
│   ├── spec-executor.md
│   └── impl-reviewer.md
├── templates/
│   ├── spec.md
│   ├── audit.md
│   ├── project.md
│   ├── state.md
│   └── todo.md
└── hooks/
    └── statusline.js
```

---

## 8. Новые идеи (за рамками GSD)

### A. Cross-provider audit

```bash
/sf audit --provider=openai
```

### B. Spec templates

```bash
/sf new --template=refactor
/sf new --template=api
/sf new --template=bugfix
```

### C. Dependency graph

```bash
/sf deps              # Визуализация
/sf deps SPEC-005     # Что зависит от SPEC-005
```

### D. Metrics dashboard

```bash
/sf metrics           # Время, ревизии, успешность
```

---

## 9. Решения, принятые в ходе обсуждения

| Дата | Вопрос | Решение | Обоснование |
|------|--------|---------|-------------|
| 2026-01-20 | Название | SpecFlow | Короткое, отражает суть |
| 2026-01-20 | Хранение аудитов | Гибридный | ≤3 inline, >3 отдельно |
| 2026-01-20 | Блокировка run | Предупреждение | Гибкость + доверие |
| 2026-01-20 | `/sf revise` без текста | Интерактивный режим | Автоматическое чтение аудита |
| 2026-01-20 | Аудит реализации | Да, циклический | `/sf review` + `/sf fix` |
| 2026-01-20 | Результат без замечаний | Явный APPROVED | Чёткий feedback |
| 2026-01-20 | To-Do система | Да, с приоритизацией | `/sf todo`, `/sf todos`, `/sf plan` |
| 2026-01-20 | Init + map-codebase | Да, упрощённо | `/sf init` |
| 2026-01-20 | Автоматические коммиты | Да, настраиваемо | config.json |
| 2026-01-20 | Ограничение токенов | Да, оценка сложности | small/medium/large |
| 2026-01-20 | Поиск при планировании | Да | Агент ищет связанный код |
| 2026-01-20 | Уточняющие вопросы | Только критические | Остальное = assumptions |
| 2026-01-20 | Приоритизация фаз | Да | `/sf priority`, `/sf next` |
| 2026-01-20 | Full CLI | Да | С первой версии |

---

## 10. Сводка команд

### Core Workflow
| Команда | Действие |
|---------|----------|
| `/sf init` | Инициализация проекта |
| `/sf new` | Создать спецификацию |
| `/sf audit` | Аудит спецификации |
| `/sf revise` | Доработать спецификацию |
| `/sf run` | Выполнить |
| `/sf review` | Аудит реализации |
| `/sf fix` | Исправить реализацию |
| `/sf done` | Завершить |

### Navigation
| Команда | Действие |
|---------|----------|
| `/sf status` | Текущее состояние |
| `/sf list` | Все спецификации |
| `/sf show` | Показать одну |
| `/sf next` | Следующая задача |

### To-Do
| Команда | Действие |
|---------|----------|
| `/sf todo` | Добавить идею |
| `/sf todos` | Список |
| `/sf plan` | Превратить в spec |
| `/sf priority` | Приоритизация |

### Decomposition
| Команда | Действие |
|---------|----------|
| `/sf split` | Разбить на части |
| `/sf deps` | Граф зависимостей |

### Session
| Команда | Действие |
|---------|----------|
| `/sf pause` | Сохранить контекст |
| `/sf resume` | Восстановить |

### Utility
| Команда | Действие |
|---------|----------|
| `/sf help` | Справка |
| `/sf history` | История |
| `/sf metrics` | Статистика |

---

**Всего: 22 команды** (vs 25 в GSD, но с большей функциональностью на команду)

---

**Готов к реализации.**
