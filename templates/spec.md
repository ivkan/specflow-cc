---
id: SPEC-XXX
type: feature | refactor | bugfix
status: draft | audited | running | review | done
priority: high | medium | low
complexity: small | medium | large
created: YYYY-MM-DD
---

# [Task Title]

## Context

[Why this is needed — background, motivation, problem being solved]

## Task

[What needs to be done — clear description of the work]

## Goal Analysis

> Optional for small specs. Recommended for medium/large specs.

### Goal Statement
{One sentence describing the outcome, not the task}

### Observable Truths
When this spec is complete, a user will observe:

1. {User-visible behavior 1}
2. {User-visible behavior 2}
3. {User-visible behavior 3}

### Required Artifacts
Files that must exist to enable observable truths:

| Artifact | Enables Truth # | Purpose |
|----------|-----------------|---------|
| src/auth/login.ts | 1, 2 | Login flow implementation |
| src/components/LoginForm.tsx | 1 | UI for login |

### Required Wiring
How artifacts connect:

| From | To | Connection Type |
|------|-----|-----------------|
| LoginForm.tsx | login.ts | Calls loginUser() |
| login.ts | /api/auth | HTTP POST |

### Key Links
Critical connections that must work correctly:

1. **{Link name}**: {Why it's critical}
   - Risk: {What could go wrong}
   - Verification: {How to verify it works}

## Requirements

### Interfaces (if applicable)

```typescript
// Type definitions, API contracts, etc.
```

### Files to Create/Modify

- [ ] `path/to/file.ext` — [what to do]
- [ ] `path/to/another.ext` — [what to do]

### Files to Delete

- [ ] `path/to/old.ext` — [reason for deletion]

## Acceptance Criteria

- [ ] [Criterion 1 — specific, measurable]
- [ ] [Criterion 2 — specific, measurable]
- [ ] [Criterion 3 — specific, measurable]

## Constraints

- [What NOT to do]
- [Boundaries and limitations]

## Implementation Tasks

> Optional. Auto-generated by auditor for large specs, or manually added.

### Task Groups

| Group | Wave | Tasks | Dependencies | Est. Context | Cumulative |
|-------|------|-------|--------------|--------------|------------|
| G1 | 1 | Create types.ts interfaces | — | ~15% | 15% |
| G2 | 2 | Create partition-handler.ts | G1 | ~20% | 35% |
| G3 | 2 | Create topic-handler.ts | G1 | ~20% | 55% |
| G4 | 3 | Wire handlers in ServerCoordinator | G2, G3 | ~25% | 80% |

**Context thresholds:**
- Per-group target: ≤30% (split if exceeded)
- Cumulative warning: >60% (use orchestrated mode)
- Cumulative blocker: >80% (must split spec)

### Execution Plan

| Wave | Groups | Parallel? | Workers |
|------|--------|-----------|---------|
| 1 | G1 | No | 1 |
| 2 | G2, G3 | Yes | 2 |
| 3 | G4 | No | 1 |

**Total workers needed:** 2 (max in any wave)

## Assumptions

> Filled by spec-creator agent. Review and correct if needed.

- [Assumption 1]
- [Assumption 2]

---

## Audit History

<!-- Filled by /sf:audit -->
